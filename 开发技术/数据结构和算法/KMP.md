KMP：一种改进字符串匹配算法，利用匹配失败后的信息，尽量减少子串（模式串）与主串的匹配次数以达到快速匹配的目的。

<br>部分匹配表（PMT）：

前缀：以字符串首位字符开始且不包含末位字符的子串。

后缀：以字符串末位字符结尾且不包含首位字符的字串。

例：acbab

前缀：{a,ac,acb,acba}

后缀：{b,ab,bab,cbab}

PMT的值记录了字符串前缀集合和后缀集合交集中的最长元素长度。PMT是KMP的核心，它记录了当子串与主串匹配失败时，子串应该从什么位置开始重新匹配。

<br>

KMP过程

设有

![](KMP_1.svg) 

开始匹配

![](KMP_2.svg) 

此时已经成功匹配了部分字符串，且遇到了不匹配的字符，接下来保持i不变，将j移动到bStr[j-1]在PMT中对应值的位置，即j=2。

![](KMP_3.svg) 

然后按上述步骤继续执行匹配直到找到匹配串或者匹配失败。

<br>

构建PMT（next数组）

设有字符串s，数组next，指针i（待设值位），j。初始有next[0]=0，i=0，j=1。如果有s[i]=s[j]，那么next[i]=j+1，i，j均后移；如果有s[i]!=s[j]且j>0，那么j=next[j]，直到满足第一个条件；如果有s[i]!=s[j]且j==0，那么next[i]=0，i后移，j不变。