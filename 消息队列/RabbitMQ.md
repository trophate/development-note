# 结构

RabbitMQ由生产者、交换机、队列、消费者组成。生产者不直接访问队列，而是通过交换机将数据发送到队列，交换机决定了数据发送到哪一个队列。

结构图：

![](../img/RabbitMQ-结构.svg)

<br/>

# 模式

RabbitMQ支持5种消息模式：简单模式、工作队列、发布/订阅、路由、主题。

## 1.  简单模式

该模式只有一个队列和一个消费者。

![](../img/RabbitMQ-简单模式.svg)

## 2. 工作队列

该模式下队列会绑定多个消费者，消息遵循某种规则分发给消费者。

![](../img/RabbitMQ-工作队列.svg)

## 3. 发布/订阅

该模式下消息会被广播到所有被绑定的队列中。

![](../img/RabbitMQ-发布-订阅.svg)

## 4. 路由

该模式下消息会发送到与路由匹配的队列中。

![](../img/RabbitMQ-路由.svg)

## 5. 主题

该模式下消息会发送到包含目标主题的所有队列中。

![](../img/RabbitMQ-主题.svg)

<br/>

# 消息确认

消息确认机制（ack）用于确保消息被正确消费。消息在被消费时，只有当消费者返回确认消息时才会从队列中移除，否则将被重新放入队列。
